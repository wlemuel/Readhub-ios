//
//  SettingsViewController.swift
//  readhub
//
//  Created by Steve Lemuel on 11/8/19.
//  Copyright (c) 2019 Steve Lemuel. All rights reserved.
//
//  This file was generated by the ğŸ VIPER generator
//

import RxCocoa
import RxDataSources
import RxSwift
import UIKit

final class SettingsViewController: UIViewController {
    // MARK: - Public properties -

    var presenter: SettingsPresenterInterface!

    // MARK: - Private properties -

    var tableview: UITableView!

    private let disposeBag = DisposeBag()

    // MARK: - Lifecycle -

    override func viewDidLoad() {
        super.viewDidLoad()
        configure()

        setupLayout()
        setupRx()
    }
}

// MARK: - Extensions -

extension SettingsViewController: SettingsViewInterface {
}

private extension SettingsViewController {
    func configure() {
        let output = Settings.ViewOutput()

        _ = presenter.configure(with: output)
    }

    func setupLayout() {
        title = "è®¾ç½®"
        
        tableview = UITableView(frame: view.frame, style: .plain).then {
            $0.register(UITableViewCell.self, forCellReuseIdentifier: "Cell")
        }

        view.addSubview(tableview)

        let items = Observable.just([
            SectionModel(model: "è®¾ç½®", items: ["è§¦æ„Ÿåé¦ˆ"]),
            SectionModel(model: "åé¦ˆ", items: ["åé¦ˆ", "é‚®ä»¶", "Telegram"]),
            SectionModel(model: "å…³äº", items: ["å¥½è¯„é¼“åŠ±", "åˆ†äº«ç»™æœ‹å‹", "ä½œè€… GitHub"]),
            SectionModel(model: "æ”¯æŒä½œè€…", items: ["ğŸ˜„ $0.99 - Buy me a cup of coffee"]),
        ])

        // åˆ›å»ºæ•°æ®æº
        let dataSource = RxTableViewSectionedReloadDataSource
        <SectionModel<String, String>>(configureCell: {
            _, tv, _, element in
            let cell = tv.dequeueReusableCell(withIdentifier: "Cell")!
            cell.textLabel?.text = "\(element)"
            cell.accessoryType = .disclosureIndicator
            return cell
        })

        dataSource.titleForHeaderInSection = { ds, index in
            ds.sectionModels[index].model
        }

        // ç»‘å®šå•å…ƒæ ¼æ•°æ®
        items
            .bind(to: tableview.rx.items(dataSource: dataSource))
            .disposed(by: disposeBag)
    }

    func setupRx() {
    }
}
